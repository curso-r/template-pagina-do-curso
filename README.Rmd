---
output: github_document
params:
  trilha_clean: programacao_para_ciencia_de_dados
  main_repo: main-intro-programacao
  turma: 202102-intro-programacao
  nome_curso: ATUALIZANDO....
  num_aula: '0'
  download_material: 'TRUE'
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
library(magrittr)

# Default chunk options
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  echo = FALSE
)

# Install deps
if (!require(CursoRopen, quietly = TRUE)) {
  remotes::install_github("curso-r/CursoRopen")
}

# Branch padrão do repositório da turma
default_branch <- CursoRopen::get_default_branch(params$turma)
```

## Informações importantes

```{r results = 'asis'}
# Baixar o ZIP do repo da turma (o repo principal não vai ter os scripts feitos em aula)
if (params$download_material == "TRUE") {
  glue::glue("- [Clique aqui](https://github.com/curso-r/{params$turma}/archive/refs/heads/{default_branch}.zip) para baixar o material do curso.")
}
```

- Nosso blog: [https://curso-r.com/blog/](https://curso-r.com/blog/)

- Nossos livros: [Ciência de Dados em R](https://livro.curso-r.com/) e [Zen do R](https://curso-r.github.io/zen-do-r/)

## Dúvidas

Fora do horário de aula ou monitoria:

- Perguntas gerais sobre o curso deverão ser feitas no Classroom.

- Perguntas sobre R, principalmente as que envolverem código, deverão ser enviadas no [nosso fórum](https://discourse.curso-r.com/).

## Slides

```{r}
htmls <- params$main_repo %>%
  CursoRopen::enframe_github_files("slides/", "[0-9]-.*html$") %>%
  dplyr::filter(!stringr::str_detect(link, "figure-html")) %>%
  dplyr::mutate(
    key = link %>%
      stringr::str_remove("\\[") %>%
      stringr::str_remove("\\].+") %>%
      fs::path_file() %>%
      fs::path_ext_remove()
  ) %>%
  dplyr::rename("Slide" = link)

pdfs <- params$main_repo %>%
  CursoRopen::enframe_github_files("slides/", "[0-9]-.*pdf$") %>%
  dplyr::mutate(
    key = link %>%
      stringr::str_remove("\\[") %>%
      stringr::str_remove("\\].+") %>%
      fs::path_file() %>%
      fs::path_ext_remove()
  ) %>%
  dplyr::rename("PDF" = link)

htmls %>%
  dplyr::left_join(pdfs, by = "key") %>%
  dplyr::select(-key) %>%
  knitr::kable()
```

## Scripts utilizados em aula

```{r}
params$turma %>%
  CursoRopen::enframe_github_files("exemplos_de_aula/", "\\.R$") %>%
  dplyr::rename("Script" = link) %>%
  knitr::kable()
```

## Lição de casa

```{r}
params$turma %>%
  CursoRopen::enframe_github_files("exercicios/", "\\.R$") %>%
  dplyr::rename("Exercício" = link) %>%
  knitr::kable()
```

## Trabalhos finais premiados

```{r}
params$turma %>%
  CursoRopen::enframe_github_files("trabalhos_premiados/", "(\\.zip|\\.rar)$") %>%
  dplyr::rename("Pasta Compactada" = link) %>%
  knitr::kable()
```

## Material extra

Referências extras relacionadas com o conteúdos das aulas, ou materiais que comentamos quando tiramos dúvidas (não necessariamente são relacionadas com o conteúdo da aula).

```{r message = FALSE}
buscar_materias_extras <- function(main_repo = params$main_repo, trilha_clean = params$trilha_clean) {
  googlesheets4::gs4_deauth()
  googledrive::drive_deauth()

  id_spreadsheet <- "1YV2vz52u2HXw1IhjrJ7dGhk7sim-9zRM" %>%
    googledrive::as_id() %>%
    googledrive::drive_ls() %>%
    dplyr::filter(name %in% params$trilha_clean) %>%
    dplyr::pull(id) %>%
    googlesheets4::as_sheets_id()

  id_spreadsheet %>%
    googlesheets4::read_sheet(stringr::str_remove(main_repo, "main-")) %>%
    dplyr::mutate(link = glue::glue("[{desc}]({url})")) %>%
    dplyr::select(-desc, -url) %>%
    dplyr::arrange(aula) %>%
    # dplyr::filter(aula <= params$num_aula) %>%
    knitr::kable(col.names = c("Aula", "Tema", "Descrição"))
}

purrr::possibly(buscar_materias_extras, "Verificar tabela de materiais extras")()
```

## Redes sociais da Curso-R

- Youtube: https://www.youtube.com/c/CursoR6/featured

- Instagram: https://www.instagram.com/cursoo_r/

- Twitter: https://twitter.com/curso_r

- Linkedin: https://www.linkedin.com/company/curso-r/

- Facebook: https://www.facebook.com/cursodeR

```{r include = FALSE}
# Criar arquivo _config.yml
if (params$download_material == TRUE) {
  content <- glue::glue(
    "theme: jekyll-theme-minimal", "\n",
    "logo: assets/logo.png", "\n",
    "title: {params$nome_curso}", "\n",
    "show_downloads: true", "\n",
    "link_material: 'https://github.com/curso-r/{params$turma}/archive/refs/heads/{default_branch}.zip'",
    "\n"
  )
} else {
  content <- glue::glue(
    "theme: jekyll-theme-minimal", "\n",
    "logo: assets/logo.png", "\n",
    "title: {params$nome_curso}", "\n",
    "show_downloads: false", "\n"
  )
}

readr::write_lines(content, "_config.yml")
```
